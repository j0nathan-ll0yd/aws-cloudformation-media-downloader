{
  "nodes": [
    {
      "id": "lambda:ListFiles",
      "type": "Lambda",
      "properties": {
        "name": "ListFiles",
        "trigger": "API Gateway",
        "purpose": "List user files"
      }
    },
    {
      "id": "lambda:LoginUser",
      "type": "Lambda",
      "properties": {
        "name": "LoginUser",
        "trigger": "API Gateway",
        "purpose": "Authenticate user"
      }
    },
    {
      "id": "lambda:RegisterDevice",
      "type": "Lambda",
      "properties": {
        "name": "RegisterDevice",
        "trigger": "API Gateway",
        "purpose": "Register device for push"
      }
    },
    {
      "id": "lambda:StartFileUpload",
      "type": "Lambda",
      "properties": {
        "name": "StartFileUpload",
        "trigger": "API Gateway",
        "purpose": "Initiate upload"
      }
    },
    {
      "id": "lambda:WebhookFeedly",
      "type": "Lambda",
      "properties": {
        "name": "WebhookFeedly",
        "trigger": "API Gateway",
        "purpose": "Process Feedly articles"
      }
    },
    {
      "id": "lambda:FileCoordinator",
      "type": "Lambda",
      "properties": {
        "name": "FileCoordinator",
        "trigger": "S3 Event",
        "purpose": "Orchestrate processing"
      }
    },
    {
      "id": "lambda:DownloadMedia",
      "type": "Lambda",
      "properties": {
        "name": "DownloadMedia",
        "trigger": "Step Functions",
        "purpose": "Download media"
      }
    },
    {
      "id": "lambda:CreateThumbnail",
      "type": "Lambda",
      "properties": {
        "name": "CreateThumbnail",
        "trigger": "Step Functions",
        "purpose": "Generate thumbnail"
      }
    },
    {
      "id": "lambda:SendPushNotification",
      "type": "Lambda",
      "properties": {
        "name": "SendPushNotification",
        "trigger": "Lambda Invoke",
        "purpose": "Send push"
      }
    },
    {
      "id": "lambda:PruneDevices",
      "type": "Lambda",
      "properties": {
        "name": "PruneDevices",
        "trigger": "CloudWatch Events",
        "purpose": "Clean devices"
      }
    },
    {
      "id": "lambda:UserDelete",
      "type": "Lambda",
      "properties": {
        "name": "UserDelete",
        "trigger": "API Gateway",
        "purpose": "Delete user cascade"
      }
    },
    {
      "id": "entity:Users",
      "type": "Entity",
      "properties": {
        "name": "Users"
      }
    },
    {
      "id": "entity:Files",
      "type": "Entity",
      "properties": {
        "name": "Files"
      }
    },
    {
      "id": "entity:Devices",
      "type": "Entity",
      "properties": {
        "name": "Devices"
      }
    },
    {
      "id": "entity:UserFiles",
      "type": "Entity",
      "properties": {
        "name": "UserFiles"
      }
    },
    {
      "id": "entity:UserDevices",
      "type": "Entity",
      "properties": {
        "name": "UserDevices"
      }
    },
    {
      "id": "service:DynamoDB",
      "type": "Service",
      "properties": {
        "name": "DynamoDB",
        "type": "database"
      }
    },
    {
      "id": "service:S3",
      "type": "Service",
      "properties": {
        "name": "S3",
        "type": "storage"
      }
    },
    {
      "id": "service:SNS",
      "type": "Service",
      "properties": {
        "name": "SNS",
        "type": "notification"
      }
    },
    {
      "id": "service:API Gateway",
      "type": "Service",
      "properties": {
        "name": "API Gateway",
        "type": "api"
      }
    },
    {
      "id": "service:Step Functions",
      "type": "Service",
      "properties": {
        "name": "Step Functions",
        "type": "orchestration"
      }
    },
    {
      "id": "service:CloudWatch",
      "type": "Service",
      "properties": {
        "name": "CloudWatch",
        "type": "monitoring"
      }
    },
    {
      "id": "external:Feedly",
      "type": "External",
      "properties": {
        "name": "Feedly"
      }
    },
    {
      "id": "external:YouTube",
      "type": "External",
      "properties": {
        "name": "YouTube"
      }
    },
    {
      "id": "external:APNS",
      "type": "External",
      "properties": {
        "name": "APNS"
      }
    },
    {
      "id": "external:Sign In With Apple",
      "type": "External",
      "properties": {
        "name": "Sign In With Apple"
      }
    },
    {
      "id": "external:GitHub",
      "type": "External",
      "properties": {
        "name": "GitHub"
      }
    }
  ],
  "edges": [
    {
      "source": "lambda:ListFiles",
      "target": "service:DynamoDB",
      "relationship": "uses"
    },
    {
      "source": "lambda:ListFiles",
      "target": "service:API Gateway",
      "relationship": "uses"
    },
    {
      "source": "lambda:LoginUser",
      "target": "service:DynamoDB",
      "relationship": "uses"
    },
    {
      "source": "lambda:LoginUser",
      "target": "service:API Gateway",
      "relationship": "uses"
    },
    {
      "source": "lambda:LoginUser",
      "target": "external:Sign In With Apple",
      "relationship": "uses"
    },
    {
      "source": "lambda:RegisterDevice",
      "target": "service:DynamoDB",
      "relationship": "uses"
    },
    {
      "source": "lambda:RegisterDevice",
      "target": "service:SNS",
      "relationship": "uses"
    },
    {
      "source": "lambda:RegisterDevice",
      "target": "service:API Gateway",
      "relationship": "uses"
    },
    {
      "source": "lambda:StartFileUpload",
      "target": "service:DynamoDB",
      "relationship": "uses"
    },
    {
      "source": "lambda:StartFileUpload",
      "target": "service:S3",
      "relationship": "uses"
    },
    {
      "source": "lambda:StartFileUpload",
      "target": "service:API Gateway",
      "relationship": "uses"
    },
    {
      "source": "lambda:WebhookFeedly",
      "target": "service:DynamoDB",
      "relationship": "uses"
    },
    {
      "source": "lambda:WebhookFeedly",
      "target": "service:S3",
      "relationship": "uses"
    },
    {
      "source": "lambda:WebhookFeedly",
      "target": "service:API Gateway",
      "relationship": "uses"
    },
    {
      "source": "lambda:WebhookFeedly",
      "target": "external:Feedly",
      "relationship": "uses"
    },
    {
      "source": "lambda:WebhookFeedly",
      "target": "external:YouTube",
      "relationship": "uses"
    },
    {
      "source": "lambda:FileCoordinator",
      "target": "service:DynamoDB",
      "relationship": "uses"
    },
    {
      "source": "lambda:FileCoordinator",
      "target": "service:Step Functions",
      "relationship": "uses"
    },
    {
      "source": "lambda:FileCoordinator",
      "target": "service:S3",
      "relationship": "uses"
    },
    {
      "source": "lambda:DownloadMedia",
      "target": "service:S3",
      "relationship": "uses"
    },
    {
      "source": "lambda:DownloadMedia",
      "target": "external:YouTube",
      "relationship": "uses"
    },
    {
      "source": "lambda:CreateThumbnail",
      "target": "service:S3",
      "relationship": "uses"
    },
    {
      "source": "lambda:SendPushNotification",
      "target": "service:SNS",
      "relationship": "uses"
    },
    {
      "source": "lambda:SendPushNotification",
      "target": "external:APNS",
      "relationship": "uses"
    },
    {
      "source": "lambda:PruneDevices",
      "target": "service:DynamoDB",
      "relationship": "uses"
    },
    {
      "source": "lambda:PruneDevices",
      "target": "service:SNS",
      "relationship": "uses"
    },
    {
      "source": "lambda:PruneDevices",
      "target": "service:CloudWatch",
      "relationship": "uses"
    },
    {
      "source": "lambda:UserDelete",
      "target": "service:DynamoDB",
      "relationship": "uses"
    },
    {
      "source": "lambda:UserDelete",
      "target": "service:S3",
      "relationship": "uses"
    },
    {
      "source": "lambda:UserDelete",
      "target": "service:API Gateway",
      "relationship": "uses"
    },
    {
      "source": "lambda:FileCoordinator",
      "target": "lambda:DownloadMedia",
      "relationship": "invokes",
      "properties": {
        "via": "Step Functions"
      }
    },
    {
      "source": "lambda:FileCoordinator",
      "target": "lambda:CreateThumbnail",
      "relationship": "invokes",
      "properties": {
        "via": "Step Functions"
      }
    },
    {
      "source": "lambda:DownloadMedia",
      "target": "lambda:SendPushNotification",
      "relationship": "invokes",
      "properties": {
        "trigger": "on_success"
      }
    },
    {
      "source": "lambda:CreateThumbnail",
      "target": "lambda:SendPushNotification",
      "relationship": "invokes",
      "properties": {
        "trigger": "on_complete"
      }
    },
    {
      "source": "lambda:ListFiles",
      "target": "entity:Users",
      "relationship": "accesses"
    },
    {
      "source": "lambda:ListFiles",
      "target": "entity:UserFiles",
      "relationship": "accesses"
    },
    {
      "source": "lambda:ListFiles",
      "target": "entity:Files",
      "relationship": "accesses"
    },
    {
      "source": "lambda:LoginUser",
      "target": "entity:Users",
      "relationship": "accesses"
    },
    {
      "source": "lambda:RegisterDevice",
      "target": "entity:Users",
      "relationship": "accesses"
    },
    {
      "source": "lambda:RegisterDevice",
      "target": "entity:Devices",
      "relationship": "accesses"
    },
    {
      "source": "lambda:RegisterDevice",
      "target": "entity:UserDevices",
      "relationship": "accesses"
    },
    {
      "source": "lambda:StartFileUpload",
      "target": "entity:Users",
      "relationship": "accesses"
    },
    {
      "source": "lambda:StartFileUpload",
      "target": "entity:Files",
      "relationship": "accesses"
    },
    {
      "source": "lambda:StartFileUpload",
      "target": "entity:UserFiles",
      "relationship": "accesses"
    },
    {
      "source": "lambda:WebhookFeedly",
      "target": "entity:Files",
      "relationship": "accesses"
    },
    {
      "source": "lambda:FileCoordinator",
      "target": "entity:Files",
      "relationship": "accesses"
    },
    {
      "source": "lambda:PruneDevices",
      "target": "entity:Devices",
      "relationship": "accesses"
    },
    {
      "source": "lambda:PruneDevices",
      "target": "entity:UserDevices",
      "relationship": "accesses"
    },
    {
      "source": "lambda:UserDelete",
      "target": "entity:Users",
      "relationship": "accesses"
    },
    {
      "source": "lambda:UserDelete",
      "target": "entity:UserFiles",
      "relationship": "accesses"
    },
    {
      "source": "lambda:UserDelete",
      "target": "entity:UserDevices",
      "relationship": "accesses"
    },
    {
      "source": "lambda:UserDelete",
      "target": "entity:Files",
      "relationship": "accesses"
    },
    {
      "source": "lambda:UserDelete",
      "target": "entity:Devices",
      "relationship": "accesses"
    },
    {
      "source": "entity:Users",
      "target": "entity:UserFiles",
      "relationship": "has_many"
    },
    {
      "source": "entity:Users",
      "target": "entity:UserDevices",
      "relationship": "has_many"
    },
    {
      "source": "entity:Files",
      "target": "entity:UserFiles",
      "relationship": "has_many"
    },
    {
      "source": "entity:Devices",
      "target": "entity:UserDevices",
      "relationship": "has_many"
    },
    {
      "source": "entity:UserFiles",
      "target": "entity:Users",
      "relationship": "belongs_to"
    },
    {
      "source": "entity:UserFiles",
      "target": "entity:Files",
      "relationship": "belongs_to"
    },
    {
      "source": "entity:UserDevices",
      "target": "entity:Users",
      "relationship": "belongs_to"
    },
    {
      "source": "entity:UserDevices",
      "target": "entity:Devices",
      "relationship": "belongs_to"
    },
    {
      "source": "service:API Gateway",
      "target": "service:Lambda",
      "relationship": "triggers"
    },
    {
      "source": "service:S3",
      "target": "service:Lambda",
      "relationship": "triggers",
      "properties": {
        "event": "s3:ObjectCreated"
      }
    },
    {
      "source": "service:CloudWatch",
      "target": "service:Lambda",
      "relationship": "triggers",
      "properties": {
        "event": "scheduled"
      }
    }
  ],
  "metadata": {
    "created": "2025-11-28T05:51:18.285Z",
    "version": "1.0.0",
    "description": "Media Downloader Lambda chains and entity relationships"
  }
}