## YouTube Cookie Expiration

YouTube has detected the cookies as expired or is blocking requests with bot detection.

**Triggered By**:
- **File ID**: ${fileId}
- **Video URL**: ${fileUrl}
- **Error Message**: ${errorMessage}
- **Timestamp**: ${timestamp}

---

## Required Action: Extract Fresh Cookies

### Step 1: Extract Cookies Using Chrome
```bash
pnpm run extract-cookies:chrome
```

This will:
1. Open Chrome browser
2. Navigate to YouTube
3. Wait for you to login manually
4. Extract cookies after login
5. Save cookies to `layers/yt-dlp/cookies/youtube-cookies.txt`

### Step 2: Deploy the Updated Layer
```bash
pnpm run deploy
```

---

## Architecture Note

This project uses **Cookies + PO Tokens** for YouTube authentication:
- **Cookies**: Required for authenticated access (extracted manually via Chrome)
- **PO Tokens**: Generated by bgutil plugin to bypass bot detection

**OAuth2 is not available** - YouTube has blocked OAuth2 authentication with yt-dlp.

---

## Background

YouTube cookies now expire every 3-5 days (previously 30-60 days). This error indicates:
- Cookies have expired naturally
- YouTube has invalidated the session
- Bot detection triggered (datacenter IP + stale cookies)

**Cookie Location**: `layers/yt-dlp/cookies/youtube-cookies.txt`

---

## Stack Trace

```
${errorStack}
```

---

## Deduplication

**Fingerprint**: `${fingerprint}`
**Components**: ${fingerprintSummary}

> This issue will be **auto-closed** when YouTube authentication succeeds.
> The fingerprint prevents duplicate issues - if this error recurs,
> a comment will be added to this issue instead of creating a new one.

---

This issue was automatically created by the cookie monitoring system.
